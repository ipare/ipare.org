import{_ as e,o as a,c as d,d as i}from"./app.a704fd29.js";const r={},t=i(`<h1 id="\u4E3B\u7A0B\u5E8F" tabindex="-1"><a class="header-anchor" href="#\u4E3B\u7A0B\u5E8F" aria-hidden="true">#</a> \u4E3B\u7A0B\u5E8F</h1><p>\u6BCF\u79CD\u8FD0\u884C\u73AF\u5883\u90FD\u4F1A\u6709\u4E00\u4E2A\u4E3B\u7A0B\u5E8F\u5BF9\u8C61\uFF0C\u4F60\u53EF\u4EE5\u5728\u8FD9\u4E2A\u5BF9\u8C61\u6DFB\u52A0\u63D2\u4EF6\u548C\u4E2D\u95F4\u4EF6</p><p>\u6240\u6709\u8FD0\u884C\u73AF\u5883\u7684\u4E3B\u7A0B\u5E8F\u90FD\u7EE7\u627F\u4E8E <code>Startup</code> \u7C7B</p><p>\u6587\u6863\u79CD\u7684 <code>startup</code> \u5747\u8868\u793A\u4E3B\u7A0B\u5E8F\u5B9E\u4F8B\u5BF9\u8C61\uFF0C\u4F46\u5E76\u4E0D\u7279\u6307\u8FD0\u884C\u73AF\u5883</p><h2 id="startup" tabindex="-1"><a class="header-anchor" href="#startup" aria-hidden="true">#</a> Startup</h2><p>\u4E3A\u4E86\u8BA9 ipare \u80FD\u591F\u5728\u5404\u7C7B\u751F\u4EA7\u73AF\u5883\u4E2D\u4F7F\u7528\uFF0C<code>Startup</code>\u7C7B\u8BBE\u8BA1\u7684\u8F83\u4E3A\u5F00\u653E\uFF0C\u5728 ts \u4E2D\u662F\u4E2A\u62BD\u8C61\u7C7B\uFF0C\u56E0\u6B64\u8BE5\u7C7B\u4E0D\u80FD\u76F4\u63A5\u4F7F\u7528\uFF0C\u9700\u8981\u5B9A\u4E49\u6D3E\u751F\u7C7B\u5E76\u5728\u5408\u9002\u7684\u51FD\u6570\u4E2D\u8C03\u7528 <code>invoke</code> \u51FD\u6570\u3002</p><p><code>@ipare/core</code> \u63D0\u4F9B\u4E86\u4E00\u4E2A <code>TestStartup</code> \u7C7B\uFF0C\u8BE5\u7C7B\u6CA1\u6709\u4EFB\u4F55\u8FD0\u884C\u73AF\u5883\uFF0C\u65B9\u4FBF\u7528\u4E8E\u5355\u5143\u6D4B\u8BD5</p><p>\u76EE\u524D\u5DF2\u652F\u6301\u7684\u8FD0\u884C\u73AF\u5883\u53C2\u8003 <a href="/usage/env">\u8FD0\u884C\u73AF\u5883\u4ECB\u7ECD</a></p><h2 id="httpcontext" tabindex="-1"><a class="header-anchor" href="#httpcontext" aria-hidden="true">#</a> HttpContext</h2><p>\u4E2D\u95F4\u4EF6\u7BA1\u9053\u4E2D\u7684\u5185\u5BB9\u90FD\u5728 <code>HttpContext</code> \u5BF9\u8C61\u4E4B\u4E2D\uFF0C\u6BCF\u4E2A\u4E2D\u95F4\u4EF6\u90FD\u53EF\u4EE5\u8C03\u7528 <code>this.ctx</code> \u6765\u83B7\u53D6\u6216\u4FEE\u6539\u4E2D\u95F4\u4EF6\u7BA1\u9053\u5185\u5BB9</p><p>\u8BE5\u5BF9\u8C61\u5305\u542B\u4EE5\u4E0B\u5185\u5BB9\uFF1A</p><ul><li>res \u5B57\u6BB5: <code>Response</code> \u5B9E\u4F8B\u5BF9\u8C61</li><li>req \u5B57\u6BB5: <code>Request</code> \u5B9E\u4F8B\u5BF9\u8C61</li><li>bag \u51FD\u6570\uFF1A\u7528\u4E8E\u5728\u4E2D\u95F4\u4EF6\u7BA1\u9053\u4E2D\u4F20\u9012\u66F4\u591A\u5185\u5BB9</li></ul><h3 id="response" tabindex="-1"><a class="header-anchor" href="#response" aria-hidden="true">#</a> Response</h3><p>\u4F5C\u4E3A API \u8FD4\u56DE\u5185\u5BB9\uFF08\u5728 Startup \u53EF\u80FD\u4F1A\u88AB\u89E3\u6790\u540E\u8FD4\u56DE\uFF09</p><p>\u5305\u542B\u4EE5\u4E0B\u5185\u5BB9</p><ul><li>headers: \u8FD4\u56DE\u7684\u5934\u90E8</li><li>body: \u8FD4\u56DE\u7684\u5185\u5BB9</li><li>status: \u8FD4\u56DE\u72B6\u6001\u7801</li><li>isSuccess: \u8FD4\u56DE\u503C\u662F\u5426\u6210\u529F\uFF0Cstatus &gt;= 200 &amp;&amp; status &lt; 300</li><li>setHeaders: \u8BBE\u7F6E\u591A\u4E2A header</li><li>setHeader: \u8BBE\u7F6E\u5355\u4E2A header</li><li>hasHeader: \u5224\u65AD header \u662F\u5426\u5B58\u5728\uFF0C\u5FFD\u7565 key \u5927\u5C0F\u5199</li><li>removeHeader: \u79FB\u9664\u4E00\u4E2A header\uFF0C\u5FFD\u7565 key \u5927\u5C0F\u5199</li><li>getHeader: \u83B7\u53D6\u4E00\u4E2A header \u503C\uFF0C\u5FFD\u7565 key \u5927\u5C0F\u5199</li></ul><p>\u5728\u6BCF\u4E2A\u4E2D\u95F4\u4EF6\u90FD\u53EF\u4EE5\u4FEE\u6539 <code>this.ctx.res</code> \u4E2D\u7684\u5185\u5BB9</p><h3 id="request" tabindex="-1"><a class="header-anchor" href="#request" aria-hidden="true">#</a> Request</h3><p>\u5728\u4E2D\u95F4\u4EF6\u4E2D\uFF0C\u53EF\u901A\u8FC7 <code>this.ctx.req</code> \u65B9\u5F0F\u83B7\u53D6\u8BF7\u6C42\u5185\u5BB9</p><p><code>req</code> \u5BF9\u8C61\u5305\u542B\u4EE5\u4E0B\u5185\u5BB9</p><ul><li>path: \u8BBF\u95EE\u8DEF\u5F84\uFF0C\u4E0D\u5E26\u57DF\u540D\u548C\u67E5\u8BE2\u53C2\u6570\uFF0C\u81EA\u52A8\u53BB\u9664\u5F00\u5934 <code>/</code></li><li>params: \u67E5\u8BE2\u53C2\u6570</li><li>body: body \u5185\u5BB9</li><li>headers: \u83B7\u53D6 header \u7684\u6DF1\u62F7\u8D1D\u503C\uFF0Cget \u5C5E\u6027</li><li>setHeaders: \u8BBE\u7F6E\u591A\u4E2A header</li><li>setHeader: \u8BBE\u7F6E\u5355\u4E2A header</li><li>hasHeader: \u5224\u65AD header \u662F\u5426\u5B58\u5728\uFF0C\u5FFD\u7565 key \u5927\u5C0F\u5199</li><li>removeHeader: \u79FB\u9664\u4E00\u4E2A header\uFF0C\u5FFD\u7565 key \u5927\u5C0F\u5199</li><li>getHeader: \u83B7\u53D6\u4E00\u4E2A header \u503C\uFF0C\u5FFD\u7565 key \u5927\u5C0F\u5199</li></ul><h4 id="x-http-method-override" tabindex="-1"><a class="header-anchor" href="#x-http-method-override" aria-hidden="true">#</a> X-HTTP-Method-Override</h4><p>\u5982\u679C\u8BF7\u6C42\u5934\u90E8\u5305\u542B <code>X-HTTP-Method-Override</code> \u53C2\u6570\uFF0C\u5219\u8BBF\u95EE\u65B9\u6CD5 <code>httpMethod</code> \u4EE5 <code>X-HTTP-Method-Override</code> \u503C\u4E3A\u51C6</p><p>\u6BD4\u5982 Action \u8981\u6C42 <code>PATCH</code> \u8BF7\u6C42\uFF0C\u4F46\u5FAE\u4FE1\u5C0F\u7A0B\u5E8F\u4E0D\u652F\u6301 <code>PATCH</code>\uFF0C\u90A3\u4E48\u53EF\u4EE5\u4F7F\u7528 <code>POST</code> \u8BBF\u95EE\uFF0C\u5E76\u5728\u5934\u90E8\u52A0\u4E0A\u6B64\u53C2\u6570\uFF0C\u503C\u4E3A <code>PATCH</code></p><div class="language-JSON ext-JSON line-numbers-mode"><pre class="language-JSON"><code>&quot;headers&quot;:{
  &quot;X-HTTP-Method-Override&quot;: &quot;PATCH&quot;
}
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="bag-\u51FD\u6570" tabindex="-1"><a class="header-anchor" href="#bag-\u51FD\u6570" aria-hidden="true">#</a> <code>bag</code> \u51FD\u6570</h3><p>\u53EF\u4EE5\u5728\u7BA1\u9053\u4E2D\u4F20\u9012\u66F4\u591A\u81EA\u5B9A\u4E49\u5185\u5BB9\u3002</p><p>\u5982\u679C\u4F7F\u7528 TS\uFF0C\u53EF\u4EE5\u501F\u6CDB\u578B\u7279\u6027\u83B7\u5F97\u66F4\u591A\u667A\u80FD\u63D0\u793A\u3002</p><p>ipare \u652F\u6301\u4E24\u79CD\u5F15\u7528\u7C7B\u578B\u7684 bag</p><ul><li>Singleton: \u5355\u4F8B\u6A21\u5F0F\uFF0C\u6DFB\u52A0\u540E\u53EF\u591A\u6B21\u83B7\u53D6\u540C\u4E00\u5F15\u7528</li><li>Transient: \u4E34\u65F6\u6A21\u5F0F\uFF0C\u6DFB\u52A0\u540E\u6BCF\u6B21\u83B7\u53D6\u90FD\u4F1A\u521B\u5EFA\u4E00\u4E2A\u65B0\u5F15\u7528</li></ul><p>\u5982\u679C\u662F\u503C\u7C7B\u578B\uFF0C\u6BCF\u6B21\u83B7\u53D6\u7684\u90FD\u662F\u8BE5\u503C\u7684\u62F7\u8D1D</p><h4 id="\u6DFB\u52A0\u6216\u4FEE\u6539-bag" tabindex="-1"><a class="header-anchor" href="#\u6DFB\u52A0\u6216\u4FEE\u6539-bag" aria-hidden="true">#</a> \u6DFB\u52A0\u6216\u4FEE\u6539 <code>bag</code></h4><div class="language-JS ext-JS line-numbers-mode"><pre class="language-JS"><code>// Singleton
this.ctx.bag(&quot;BAG_NAME&quot;, { /*bag content*/ });
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><p>OR</p><div class="language-JS ext-JS line-numbers-mode"><pre class="language-JS"><code>// Transient
this.ctx.bag(&quot;BAG_NAME&quot;, () =&gt; { /*bag content*/ });
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="\u83B7\u53D6-bag" tabindex="-1"><a class="header-anchor" href="#\u83B7\u53D6-bag" aria-hidden="true">#</a> \u83B7\u53D6 <code>bag</code></h4><div class="language-JS ext-JS line-numbers-mode"><pre class="language-JS"><code>const val = this.ctx.bag(&quot;BAG_NAME&quot;)
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>\u6216 TS</p><div class="language-TS ext-TS line-numbers-mode"><pre class="language-TS"><code>const val = this.ctx.bag&lt;string&gt;(&quot;BAG_NAME&quot;)
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div>`,39),s=[t];function c(o,l){return a(),d("div",null,s)}var h=e(r,[["render",c],["__file","startup.html.vue"]]);export{h as default};
